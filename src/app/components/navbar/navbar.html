<nav class="navbar">
  <div class="container">
    <div class="navbar-brand">
      <a routerLink="/" class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="32" height="32">
          <path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"/>
        </svg>
        <span>Movie App</span>
      </a>
    </div>

    <div class="navbar-search">
      <form (submit)="onSearch($event)" class="search-form">
        <input
          type="text"
          [(ngModel)]="searchQuery"
          name="search"
          placeholder="Search movies..."
          class="search-input"
        />
        <button type="submit" class="search-btn">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="20" height="20">
            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          </svg>
        </button>
      </form>
    </div>

    <div class="navbar-actions">
      <button (click)="toggleDarkMode()" class="icon-btn" title="Toggle dark mode">
        @if (themeService.isDarkMode()) {
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z"/>
          </svg>
        } @else {
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="24" height="24">
            <path d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2z"/>
          </svg>
        }
      </button>

      <a routerLink="/home" class="nav-link" routerLinkActive="active">Now Playing</a>
      <a routerLink="/popular" class="nav-link" routerLinkActive="active">Popular</a>
      <a routerLink="/top-rated" class="nav-link" routerLinkActive="active">Top Rated</a>
      <a routerLink="/upcoming" class="nav-link" routerLinkActive="active">Upcoming</a>

      <a routerLink="/wishlist" class="nav-link wishlist-link" routerLinkActive="active">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
        Wishlist
        <span class="wishlist-badge" *ngIf="wishlistCount > 0">{{ wishlistCount }}</span>
      </a>

      <!-- Profile icon - only show if logged in -->
      <a *ngIf="isLoggedIn" routerLink="/accdetails" class="profile-link" title="Account Details">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="28" height="28">
          <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </svg>
      </a>

      <!-- Login/Logout button -->
      <button (click)="onAuthAction()" class="auth-btn" [class.btn-danger]="isLoggedIn" [class.btn-primary]="!isLoggedIn">
        <svg *ngIf="!isLoggedIn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
          <path d="M11 7L9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"/>
        </svg>
        <svg *ngIf="isLoggedIn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
          <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5-5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
        </svg>
        {{ isLoggedIn ? 'Logout' : 'Login' }}
      </button>
    </div>

    <button class="mobile-menu-toggle" (click)="toggleMobileMenu()">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="24" height="24">
        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
      </svg>
    </button>
  </div>

  @if (showMobileMenu) {
    <div class="mobile-menu">
      <a routerLink="/home" (click)="toggleMobileMenu()">Now Playing</a>
      <a routerLink="/popular" (click)="toggleMobileMenu()">Popular Movies</a>
      <a routerLink="/top-rated" (click)="toggleMobileMenu()">Top Rated</a>
      <a routerLink="/upcoming" (click)="toggleMobileMenu()">Upcoming</a>
      <a routerLink="/wishlist" (click)="toggleMobileMenu()" class="wishlist-mobile-link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
        Wishlist
        <span class="wishlist-badge" *ngIf="wishlistCount > 0">{{ wishlistCount }}</span>
      </a>
      <a *ngIf="isLoggedIn" routerLink="/accdetails" (click)="toggleMobileMenu()">Account Details</a>
      <button (click)="onAuthAction(); toggleMobileMenu()" class="mobile-auth-btn" [class.btn-danger]="isLoggedIn" [class.btn-primary]="!isLoggedIn">
        {{ isLoggedIn ? 'Logout' : 'Login' }}
      </button>
    </div>
  }
</nav>
